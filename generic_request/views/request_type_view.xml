<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="action_request_type_requests" model="ir.actions.act_window">
        <field name="name">Requests</field>
        <field name="res_model">request.request</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="domain">[('type_id', '=', active_id)]</field>
        <field name="context">{'default_type_id': active_id}</field>
    </record>
    <record id="action_request_type_routes" model="ir.actions.act_window">
        <field name="name">Routes</field>
        <field name="res_model">request.stage.route</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('request_type_id', '=', active_id)]</field>
        <field name="context">{'default_request_type_id': active_id}</field>
    </record>
    <record id="action_request_type_stages" model="ir.actions.act_window">
        <field name="name">Stages</field>
        <field name="res_model">request.stage</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('request_type_id', '=', active_id)]</field>
        <field name="context">{'default_request_type_id': active_id}</field>
    </record>
    <record id="act_request_dashboard_type_2_open_requests" model="ir.actions.act_window">
        <field name="name">Open requests</field>
        <field name="res_model">request.request</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'search_default_filter_open': 1, 'search_default_filter_assigned_to_me': 1, 'search_default_filter_created_by_me': 1, 'search_default_filter_unassigned': 1, 'search_default_type_id': active_id}</field>
    </record>
    <record id="act_request_dashboard_type_2_closed_requests" model="ir.actions.act_window">
        <field name="name">Closed requests</field>
        <field name="res_model">request.request</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'search_default_filter_closed': 1, 'search_default_filter_assigned_to_me': 1, 'search_default_filter_created_by_me': 1, 'search_default_filter_unassigned': 1, 'search_default_type_id': active_id}</field>
    </record>
    <record id="request_type_view_dashboard" model="ir.ui.view">
        <field name="model">request.type</field>
        <field name="arch" type="xml">
            <kanban class="oe_background_grey o_request_dashboard_kanban">
                <field name="name"/>
                <field name="display_name"/>
                <field name="code"/>
                <field name="request_open_count"/>
                <field name="request_closed_count"/>
                <field name="help_html"/>
                <field name="color"/>
                <field name="stage_count"/>
                <field name="route_count"/>
                <field name="request_open_today_count"/>
                <field name="request_open_last_24h_count"/>
                <field name="request_open_week_count"/>
                <field name="request_open_month_count"/>
                <field name="request_closed_today_count"/>
                <field name="request_closed_last_24h_count"/>
                <field name="request_closed_week_count"/>
                <field name="request_closed_month_count"/>
                <field name="request_deadline_today_count"/>
                <field name="request_deadline_last_24h_count"/>
                <field name="request_deadline_week_count"/>
                <field name="request_deadline_month_count"/>
                <field name="request_unassigned_count"/>
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_global_click o_request_dashboard_kanban">
                            <div class="o_request_dashboard_kanban_main" t-attf-style="background-color: {{ record.color.raw_value }}">
                                <div class="o_request_dashboard_content">
                                    <div class="o_kanban_primary_left">
                                        <div class="o_primary">
                                            <span>
                                                <t t-esc="record.display_name.raw_value"/>
                                            </span>
                                        </div>
                                        <div class="text-muted" t-if="record.code.raw_value">
                                            <span>
                                                <t t-esc="record.code.raw_value"/>
                                            </span>
                                        </div>
                                        <div class="o_request_info_dashboard_kanban_boxes" groups="generic_request.group_request_show_stat_on_kanban_views">
                                            <table class="table mb4 mt4">
                                                <thead>
                                                    <tr>
                                                        <th class="text-center"/>
                                                        <th class="text-center" title="Today">
                                                            T
                                                        </th>
                                                        <th class="text-center" title="Last 24 hours">
                                                            24h
                                                        </th>
                                                        <th class="text-center" title="Week">
                                                            W
                                                        </th>
                                                        <th class="text-center" title="Month">
                                                            M
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody class="text-center">
                                                    <tr>
                                                        <td class="text-left" title="New">
                                                            N
                                                        </td>
                                                        <td class="o_request_stat_table">
                                                            <a name="action_type_request_open_today_count" type="object">
                                                                <span class="o_value">
                                                                    <t t-esc="record.request_open_today_count.value"/>
                                                                </span>
                                                            </a>
                                                        </td>
                                                        <td class="o_request_stat_table">
                                                            <a name="action_type_request_open_last_24h_count" type="object">
                                                                <span class="o_value">
                                                                    <t t-esc="record.request_open_last_24h_count.value"/>
                                                                </span>
                                                            </a>
                                                        </td>
                                                        <td class="o_request_stat_table">
                                                            <a name="action_type_request_open_week_count" type="object">
                                                                <span class="o_value">
                                                                    <t t-esc="record.request_open_week_count.value"/>
                                                                </span>
                                                            </a>
                                                        </td>
                                                        <td class="o_request_stat_table">
                                                            <a name="action_type_request_open_month_count" type="object">
                                                                <span class="o_value">
                                                                    <t t-esc="record.request_open_month_count.value"/>
                                                                </span>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left" title="Closed">
                                                            C
                                                        </td>
                                                        <td class="o_request_stat_table">
                                                            <a name="action_type_request_closed_today_count" type="object">
                                                                <span class="o_value">
                                                                    <t t-esc="record.request_closed_today_count.value"/>
                                                                </span>
                                                            </a>
                                                        </td>
                                                        <td class="o_request_stat_table">
                                                            <a name="action_type_request_closed_last_24h_count" type="object">
                                                                <span class="o_value">
                                                                    <t t-esc="record.request_closed_last_24h_count.value"/>
                                                                </span>
                                                            </a>
                                                        </td>
                                                        <td class="o_request_stat_table">
                                                            <a name="action_type_request_closed_week_count" type="object">
                                                                <span class="o_value">
                                                                    <t t-esc="record.request_closed_week_count.value"/>
                                                                </span>
                                                            </a>
                                                        </td>
                                                        <td class="o_request_stat_table">
                                                            <a name="action_type_request_closed_month_count" type="object">
                                                                <span class="o_value">
                                                                    <t t-esc="record.request_closed_month_count.value"/>
                                                                </span>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left" title="Deadline">
                                                            D
                                                        </td>
                                                        <td class="o_request_stat_table">
                                                            <a name="action_type_request_deadline_today_count" type="object">
                                                                <span class="o_value">
                                                                    <t t-esc="record.request_deadline_today_count.value"/>
                                                                </span>
                                                            </a>
                                                        </td>
                                                        <td class="o_request_stat_table">
                                                            <a name="action_type_request_deadline_last_24h_count" type="object">
                                                                <span class="o_value">
                                                                    <t t-esc="record.request_deadline_last_24h_count.value"/>
                                                                </span>
                                                            </a>
                                                        </td>
                                                        <td class="o_request_stat_table">
                                                            <a name="action_type_request_deadline_week_count" type="object">
                                                                <span class="o_value">
                                                                    <t t-esc="record.request_deadline_week_count.value"/>
                                                                </span>
                                                            </a>
                                                        </td>
                                                        <td class="o_request_stat_table">
                                                            <a name="action_type_request_deadline_month_count" type="object">
                                                                <span class="o_value">
                                                                    <t t-esc="record.request_deadline_month_count.value"/>
                                                                </span>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left" title="Unassigned">
                                                            U
                                                        </td>
                                                        <td class="o_request_stat_table" colspan="4">
                                                            <a name="action_type_request_unassigned_count" type="object">
                                                                <span class="o_value">
                                                                    <t t-esc="record.request_unassigned_count.value"/>
                                                                </span>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="o_buttons">
                                            <a name="%(generic_request.action_request_type_stages)d" title="Stages" type="action">
                                                <span class="fa fa-bars"/>
                                                <span>
                                                    <t t-esc="record.stage_count.raw_value"/>
                                                </span>
                                            </a>
                                            <a name="%(generic_request.action_request_type_routes)d" title="Routes" type="action">
                                                <span class="fa fa-random"/>
                                                <span>
                                                    <t t-esc="record.route_count.raw_value"/>
                                                </span>
                                            </a>
                                            <a name="action_request_type_diagram" title="Diagram" type="object">
                                                <span class="fa fa-lg fa-code-fork"/>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="o_request_dashboard_kanban_boxes">
                                <div class="o_request_dashboard_kanban_box" title="Open requests">
                                    <a name="%(act_request_dashboard_type_2_open_requests)d" type="action">
                                        <span class="o_value">
                                            <t t-esc="record.request_open_count.value"/>
                                        </span>
                                    </a>
                                </div>
                                <div class="o_request_dashboard_kanban_box" title="Closed requests">
                                    <a name="%(act_request_dashboard_type_2_closed_requests)d" type="action">
                                        <span class="o_value">
                                            <t t-esc="record.request_closed_count.raw_value"/>
                                        </span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban></field>
    </record>
    <record id="view_request_type_search" model="ir.ui.view">
        <field name="model">request.type</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="code"/>
                <separator/>
                <field name="category_ids"/>
                <separator/>
                <field name="kind_id"/>
                <separator/>
                <filter domain="[('active', '=', False)]" name="filter_archived" string="Archived"/>
                <group name="group_group_by">
                    <filter context="{'group_by': 'kind_id'}" name="filter_group_by_kind" string="Kind"/>
                </group>
            </search></field>
    </record>
    <record id="view_request_type_tree" model="ir.ui.view">
        <field name="model">request.type</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="code"/>
                <field name="active"/>
                <field name="category_ids" options="{'color_field': 'color'}" widget="many2many_tags"/>
                <field name="kind_id"/>
                <field name="default_assignee_id"/>
                <field name="stage_count"/>
                <field name="route_count"/>
                <field name="request_count"/>
            </tree></field>
    </record>
    <record id="view_request_type_form" model="ir.ui.view">
        <field name="model">request.type</field>
        <field name="arch" type="xml">
            <form string="Request Type">
                <field invisible="1" name="id"/>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" icon="fa-comments-o" name="%(action_request_type_requests)d" type="action">
                            <field name="request_count" string="Requests" widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button" icon="fa-code-fork" name="action_request_type_diagram" string="View Flow" type="object">
                        </button>
                        <button class="oe_stat_button" icon="fa-random" name="%(action_request_type_routes)d" type="action">
                            <field name="route_count" string="Routes" widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button" icon="fa-bars" name="%(action_request_type_stages)d" type="action">
                            <field name="stage_count" string="Stages" widget="statinfo"/>
                        </button>
                    </div>
                    <field invisible="1" name="active"/>
                    <widget bg_color="bg-danger" invisible="active == True" name="web_ribbon" title="Archived"/>
                    <div class="oe_title">
                        <h1 name="header_type">
                            <field name="name" placeholder="Request type name..."/>
                        </h1>
                        <h3 name="header_code">
                            <field name="code" placeholder="Request type code..."/>
                        </h3>
                        <h3 name="header_categories">
                            <field name="category_ids" options="{'color_field': 'color'}" placeholder="Request Category..." widget="many2many_tags"/>
                        </h3>
                        <h3 name="header_kind">
                            <field name="kind_id" placeholder="Request kind..."/>
                        </h3>
                    </div>
                    <notebook>
                        <page name="page_settings" string="Settings">
                            <group name="group_settings">
                                <group name="group_settings_generic" string="Generic Settings">
                                    <label for="start_stage_id"/>
                                    <div>
                                        <field invisible="start_stage_id == False" name="start_stage_id"/>
                                        <button class="btn-primary" invisible="start_stage_id != False or id == False" name="action_create_default_stage_and_routes" string="Create default" style="padding-top: 0; padding-bottom: 0;" type="object"/>
                                    </div>
                                    <field name="is_market_place"/>
                                    <field name="sequence_id" placeholder="Sequence..."/>
                                    <field name="color" widget="color"/>
                                    <field name="tag_category_ids" widget="many2many_tags"/>
                                    <field name="access_group_ids" options="{'no_create': true, 'no_quick_create': true}" widget="many2many_tags"/>
                                </group>
                                <group name="group_settings_priority" string="Priority">
                                    <field name="complex_priority" widget="boolean_toggle"/>
                                    <field invisible="complex_priority == True" name="default_priority" widget="priority"/>
                                    <field invisible="complex_priority == False" name="default_impact" widget="priority"/>
                                    <field invisible="complex_priority == False" name="default_urgency" widget="priority"/>
                                </group>
                                <group name="group_settings_timesheet" string="Time Tracking">
                                    <field name="use_timesheet" string="Use Timesheet" widget="boolean_toggle"/>
                                    <field invisible="use_timesheet == False" name="timesheet_activity_ids" options="{'color_field': 'color'}" string="Timesheet Activities" widget="many2many_tags"/>
                                </group>
                                <group name="group_settings_helpdesk_sync" string="Ticket Sync">
<!--                                    <field name="create_local_ticket" string="Create Local Ticket" widget="boolean_toggle"/>-->
<!--                                    <field domain="[('state', '=', 'connected')]" invisible="create_local_ticket == False" -->
<!--                                           name="local_ticket_instance_id" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"-->
<!--                                           required="create_local_ticket == True" string="Local Instance"/>-->
                                </group>
                                <group name="group_settings_auto_create_orders" string="Auto Create Pickings">
                                    <field name="auto_create_receiving_request" string="Auto Create Receiving Request" widget="boolean_toggle"/>
                                    <field name="auto_create_shipping_request" string="Auto Create Shipping Request" widget="boolean_toggle"/>
                                </group>
                                <group name="group_settings_auto_create_routine" string="Auto Create Routines">
                                    <field name="is_routine_ticket_type" string="Is Routine Ticket Type" widget="boolean_toggle"/>
                                    <field invisible="is_routine_ticket_type == False" name="auto_create_routine" string="Auto Create Routine" widget="boolean_toggle"/>
                                    <field invisible="is_routine_ticket_type == False" name="auto_create_routine_model_id" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}" required="auto_create_routine == True" string="Routine Model"/>
                                    <field invisible="is_routine_ticket_type == False" name="auto_create_routine_code" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}" required="auto_create_routine == True" string="Routine Code"/>
                                </group>
                            </group>
                            <separator colspan="4" string="Description"/>
                            <field colspan="4" name="description" nolabel="1" placeholder="Description" select="2"/>
                        </page>
                        <page name="page_write_control" string="Write control">
                        </page>
                        <page name="page_help" string="Help">
                            <field colspan="4" name="help_html"/>
                        </page>
                        <page name="page_instruction" string="Instruction">
                            <field colspan="4" name="instruction_html"/>
                        </page>
                        <page name="page_note" string="Note">
                            <field colspan="4" name="note_html"/>
                        </page>
                        <page name="page_defaults" string="Defaults">
                            <separator colspan="4" string="Default request's text"/>
                            <field colspan="4" name="default_request_text"/>
                        </page>
                        <page name="page_notifications" string="Notifications">
                            <div>
                                <separator/>
                                <table class="table table-bordered" name="table-notification-settings">
                                    <thead>
                                        <tr>
                                            <th class="text-center" colspan="2">
                                                Send Default Notification
                                            </th>
                                            <th class="text-center">
                                                Show Request Text
                                            </th>
                                            <th class="text-center">
                                                Show Response Text
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody class="text-center">
                                        <tr>
                                            <td class="text-left">
                                                Created
                                            </td>
                                            <td>
                                                <field name="send_default_created_notification" style="width: 25%"/>
                                            </td>
                                            <td>
                                                <field name="created_notification_show_request_text"/>
                                            </td>
                                            <td>
                                                <field name="created_notification_show_response_text"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-left">
                                                Assigned
                                            </td>
                                            <td>
                                                <field name="send_default_assigned_notification" style="width: 25%"/>
                                            </td>
                                            <td>
                                                <field name="assigned_notification_show_request_text"/>
                                            </td>
                                            <td>
                                                <field name="assigned_notification_show_response_text"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-left">
                                                UAT
                                            </td>
                                            <td>
                                                <field name="send_default_created_uat" style="width: 25%"/>
                                            </td>
                                            <td>
                                                <field name="uat_notification_show_request_text"/>
                                            </td>
                                            <td>
                                                <field name="uat_notification_show_response_text"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-left">
                                                Closed
                                            </td>
                                            <td>
                                                <field name="send_default_closed_notification" style="width: 25%"/>
                                            </td>
                                            <td>
                                                <field name="closed_notification_show_request_text"/>
                                            </td>
                                            <td>
                                                <field name="closed_notification_show_response_text"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-left">
                                                Reopened
                                            </td>
                                            <td>
                                                <field name="send_default_reopened_notification" style="width: 25%"/>
                                            </td>
                                            <td>
                                                <field name="reopened_notification_show_request_text"/>
                                            </td>
                                            <td>
                                                <field name="reopened_notification_show_response_text"/>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </page>
                        <page name="page_requests_info" string="Statistics">
                            <div>
                                <separator/>
                                <table class="table table-bordered" name="table-request-info">
                                    <thead>
                                        <tr>
                                            <th class="text-center"/>
                                            <th class="text-center">
                                                [T] Today
                                            </th>
                                            <th class="text-center">
                                                [24 h]Last 24 Hour
                                            </th>
                                            <th class="text-center">
                                                [W] Week
                                            </th>
                                            <th class="text-center">
                                                [M] Month
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody class="text-center">
                                        <tr>
                                            <td class="text-left">
                                                [N] New
                                            </td>
                                            <td class="o_request_stat_table">
                                                <button name="action_type_request_open_today_count" type="object">
                                                    <field name="request_open_today_count"/>
                                                </button>
                                            </td>
                                            <td class="o_request_stat_table">
                                                <button name="action_type_request_open_last_24h_count" type="object">
                                                    <field name="request_open_last_24h_count"/>
                                                </button>
                                            </td>
                                            <td class="o_request_stat_table">
                                                <button name="action_type_request_open_week_count" type="object">
                                                    <field name="request_open_week_count"/>
                                                </button>
                                            </td>
                                            <td class="o_request_stat_table">
                                                <button name="action_type_request_open_month_count" type="object">
                                                    <field name="request_open_month_count"/>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-left">
                                                [C] Closed
                                            </td>
                                            <td class="o_request_stat_table">
                                                <button name="action_type_request_closed_today_count" type="object">
                                                    <field name="request_closed_today_count"/>
                                                </button>
                                            </td>
                                            <td class="o_request_stat_table">
                                                <button name="action_type_request_closed_last_24h_count" type="object">
                                                    <field name="request_closed_last_24h_count"/>
                                                </button>
                                            </td>
                                            <td class="o_request_stat_table">
                                                <button name="action_type_request_closed_week_count" type="object">
                                                    <field name="request_closed_week_count"/>
                                                </button>
                                            </td>
                                            <td class="o_request_stat_table">
                                                <button name="action_type_request_closed_month_count" type="object">
                                                    <field name="request_closed_month_count"/>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-left">
                                                [D] Deadline
                                            </td>
                                            <td class="o_request_stat_table">
                                                <button name="action_type_request_deadline_today_count" type="object">
                                                    <field name="request_deadline_today_count"/>
                                                </button>
                                            </td>
                                            <td class="o_request_stat_table">
                                                <button name="action_type_request_deadline_last_24h_count" type="object">
                                                    <field name="request_deadline_last_24h_count"/>
                                                </button>
                                            </td>
                                            <td class="o_request_stat_table">
                                                <button name="action_type_request_deadline_week_count" type="object">
                                                    <field name="request_deadline_week_count"/>
                                                </button>
                                            </td>
                                            <td class="o_request_stat_table">
                                                <button name="action_type_request_deadline_month_count" type="object">
                                                    <field name="request_deadline_month_count"/>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-left">
                                                [U] Unassigned
                                            </td>
                                            <td class="o_request_stat_table" colspan="4">
                                                <button name="action_type_request_unassigned_count" type="object">
                                                    <field name="request_unassigned_count"/>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </page>
                        <page name="default_team" string="Team">
                            <group>
                                <field name="default_assignee_id"/>
                            </group>
                            <field name="team_ids"><tree editable="top">
                                    <field name="name"/>
                                    <field name="email"/>
                                </tree></field>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="message_ids"/>
                </div>
            </form></field>
    </record>
<!--    <record id="view_request_type_diagram" model="ir.ui.view">-->
<!--        <field name="model">request.type</field>-->
<!--        <field name="type">diagram_plus</field>-->
<!--        <field name="arch" type="xml">-->
<!--            <diagram_plus>-->
<!--                <node bg_color_field="res_bg_color" bgcolor="gray:closed" fg_color_field="res_label_color" object="request.stage">-->
<!--                    <field name="name"/>-->
<!--                    <field name="closed"/>-->
<!--                    <field name="res_bg_color"/>-->
<!--                    <field name="res_label_color"/>-->
<!--                </node>-->
<!--                <arrow destination="stage_to_id" label="['name']" object="request.stage.route" source="stage_from_id">-->
<!--                    <field name="stage_from_id"/>-->
<!--                    <field name="stage_to_id"/>-->
<!--                    <field name="name"/>-->
<!--                </arrow>-->
<!--            </diagram_plus>-->
<!--        </field>-->
<!--    </record>-->
    <record id="action_type_window" model="ir.actions.act_window">
        <field name="name">Type</field>
        <field name="res_model">request.type</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'create_default_stages': True}</field>
    </record>
    <menuitem action="action_type_window" id="menu_type_view" parent="menu_configuration_requests"/>
</odoo>
